version: "2"

networks:
  ineo_network:
    external:
      name: nginxproxynetwork

volumes:
  ineo-sync-data:
    driver: local

services:
  python-run:
    image: registry.huc.knaw.nl/ineo/ineo-sync:0.1
    container_name: ineo-sync
    volumes:
      - ineo-sync-data:/src/data
    restart: unless-stopped
    networks:
      - ineo_network

  rumbledb:
    image: rumbledb/rumble:latest
    container_name: rumbledb
    volumes:
      - ineo-sync-data:/data
    restart: unless-stopped
    command: ["serve", "-p", "8001", "-h", "0.0.0.0"]
    networks:
      - ineo_network
    depends_on:
      - python-run
  